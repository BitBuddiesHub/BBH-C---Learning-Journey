# C++ 运算符 (Operator) 详解

C++ 提供了丰富的运算符，支持各种操作如算术、逻辑、关系等。以下内容详细介绍了 C++ 中的运算符及其用法。

## 目录
1. [算术运算符](#算术运算符)
2. [关系运算符](#关系运算符)
3. [逻辑运算符](#逻辑运算符)
4. [位运算符](#位运算符)
5. [赋值运算符](#赋值运算符)
6. [其他运算符](#其他运算符)
7. [运算符重载](#运算符重载)

---

## 算术运算符

| 运算符 | 描述            | 示例         |
| ------ | --------------- | ------------ |
| `+`    | 加法            | `a + b`      |
| `-`    | 减法            | `a - b`      |
| `*`    | 乘法            | `a * b`      |
| `/`    | 除法            | `a / b`      |
| `%`    | 取余            | `a % b`      |

### 示例代码
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10, b = 3;
    cout << "a + b = " << a + b << endl;
    cout << "a % b = " << a % b << endl;
    return 0;
}
```

---

## 关系运算符

| 运算符 | 描述            | 示例         |
| ------ | --------------- | ------------ |
| `==`   | 等于            | `a == b`     |
| `!=`   | 不等于          | `a != b`     |
| `>`    | 大于            | `a > b`      |
| `<`    | 小于            | `a < b`      |
| `>=`   | 大于等于        | `a >= b`     |
| `<=`   | 小于等于        | `a <= b`     |

### 示例代码
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10, b = 20;
    if (a < b) {
        cout << "a is less than b" << endl;
    }
    return 0;
}
```

---

## 逻辑运算符

| 运算符 | 描述             | 示例            |
| ------ | ---------------- | --------------- |
| `&&`   | 逻辑与（AND）    | `a && b`        |
| `||`   | 逻辑或（OR）     | `a || b`        |
| `!`    | 逻辑非（NOT）    | `!a`            |

### 示例代码
```cpp
#include <iostream>
using namespace std;

int main() {
    bool a = true, b = false;
    cout << "a && b = " << (a && b) << endl;
    cout << "!a = " << (!a) << endl;
    return 0;
}
```

---

## 位运算符

| 运算符 | 描述             | 示例           |
| ------ | ---------------- | -------------- |
| `&`    | 按位与           | `a & b`        |
| `|`    | 按位或           | `a | b`        |
| `^`    | 按位异或         | `a ^ b`        |
| `~`    | 按位取反         | `~a`           |
| `<<`   | 左移             | `a << 2`       |
| `>>`   | 右移             | `a >> 2`       |

**按位运算符** 操作的是变量的二进制表示形式，而非布尔值。

---

### 1. 按位与（`&`）

#### 描述
- 按位与将两个数的二进制位逐位比较。
- 如果对应的位都为 `1`，结果为 `1`；否则结果为 `0`。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 5;  // 二进制: 0101
    int b = 3;  // 二进制: 0011
    cout << "a & b = " << (a & b) << endl; // 结果: 1 (二进制: 0001)
    return 0;
}
```

**计算过程**:
```
  0101  (a)
& 0011  (b)
  ----
  0001  (结果)
```

---

### 2. 按位或（`|`）

#### 描述
- 按位或将两个数的二进制位逐位比较。
- 如果任意一位为 `1`，结果为 `1`；否则为 `0`。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 5;  // 二进制: 0101
    int b = 3;  // 二进制: 0011
    cout << "a | b = " << (a | b) << endl; // 结果: 7 (二进制: 0111)
    return 0;
}
```

**计算过程**:
```
  0101  (a)
| 0011  (b)
  ----
  0111  (结果)
```

---

### 3. 按位异或（`^`）

#### 描述
- 按位异或将两个数的二进制位逐位比较。
- 如果两位相同，结果为 `0`；如果两位不同，结果为 `1`。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 5;  // 二进制: 0101
    int b = 3;  // 二进制: 0011
    cout << "a ^ b = " << (a ^ b) << endl; // 结果: 6 (二进制: 0110)
    return 0;
}
```

**计算过程**:
```
  0101  (a)
^ 0011  (b)
  ----
  0110  (结果)
```

---

### 4. 按位取反（`~`）

#### 描述
- 按位取反将一个数的每一位都取反：`1` 变为 `0`，`0` 变为 `1`。
- 在带符号数的情况下，`~` 操作会包括符号位，因此结果通常表示为负数的补码形式。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 5;  // 二进制: 00000000 00000000 00000000 00000101
    cout << "~a = " << (~a) << endl; // 结果: -6 (补码形式)
    return 0;
}
```

**计算过程**:
```
  00000000 00000000 00000000 00000101  (a)
~ 11111111 11111111 11111111 11111010  (~a)
```

结果为 `-6`，因为补码表示的负数为反码再加 1。

---

### 5. 左移（`<<`）

#### 描述
- 左移将一个数的二进制位整体向左移动指定位数，右侧补 `0`。
- 左移等价于乘以 `2^n`（`n` 为移动的位数）。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 5;  // 二进制: 00000101
    cout << "a << 2 = " << (a << 2) << endl; // 结果: 20 (二进制: 00010100)
    return 0;
}
```

**计算过程**:
```
  00000101  (a)
<< 2
  00010100  (结果)
```

结果等价于 `5 * 2^2 = 20`。

---

### 6. 右移（`>>`）

#### 描述
- 右移将一个数的二进制位整体向右移动指定位数。
- **逻辑右移**: 左侧补 `0`（无符号数）。
- **算术右移**: 左侧补符号位（有符号数）。

#### 示例
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 20; // 二进制: 00010100
    cout << "a >> 2 = " << (a >> 2) << endl; // 结果: 5 (二进制: 00000101)
    return 0;
}
```

**计算过程**:
```
  00010100  (a)
>> 2
  00000101  (结果)
```

结果等价于 `20 / 2^2 = 5`。

---

## 小结

| 运算符 | 操作描述                     | 应用场景                        |
| ------ | ---------------------------- | ------------------------------- |
| `&`    | 对应位都为 `1` 时结果为 `1` | 掩码操作，用于保留特定位        |
| `|`    | 对应位有一个为 `1` 结果为 `1` | 设置特定位                     |
| `^`    | 两个位相同时结果为 `0`        | 翻转特定位                     |
| `~`    | 每个位取反                   | 补码运算、求反码               |
| `<<`   | 二进制位向左移 n 位          | 快速乘法、位操作优化            |
| `>>`   | 二进制位向右移 n 位          | 快速除法、符号扩展              |

---

## 赋值运算符

| 运算符 | 描述                    | 示例         |
| ------ | ----------------------- | ------------ |
| `=`    | 赋值                    | `a = b`      |
| `+=`   | 加后赋值                | `a += b`     |
| `-=`   | 减后赋值                | `a -= b`     |
| `*=`   | 乘后赋值                | `a *= b`     |
| `/=`   | 除后赋值                | `a /= b`     |
| `%=`   | 取余后赋值              | `a %= b`     |

---

## 其他运算符

### 条件运算符（三元运算符）
```cpp
int result = (a > b) ? a : b;
```

### 自增与自减运算符
| 运算符 | 描述                | 示例      |
| ------ | ------------------- | --------- |
| `++`   | 自增                | `++a`     |
| `--`   | 自减                | `--a`     |

### 示例代码
```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10;
    cout << "a++ = " << a++ << endl; // 后置自增
    cout << "++a = " << ++a << endl; // 前置自增
    return 0;
}
```

---

## 运算符重载

C++ 允许开发者自定义特定的运算符操作，即**运算符重载**。

### 重载示例：重载 `+` 运算符
```cpp
#include <iostream>
using namespace std;

class Complex {
private:
    double real, imag;

public:
    Complex(double r, double i) : real(r), imag(i) {}

    // 重载加法运算符
    Complex operator+(const Complex& other) {
        return Complex(real + other.real, imag + other.imag);
    }

    void display() {
        cout << real << " + " << imag << "i" << endl;
    }
};

int main() {
    Complex c1(1.2, 3.4), c2(5.6, 7.8);
    Complex c3 = c1 + c2; // 使用重载的 + 运算符
    c3.display();
    return 0;
}
```

### 输出
```
6.8 + 11.2i
```

---